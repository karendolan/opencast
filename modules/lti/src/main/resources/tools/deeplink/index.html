<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="author" content="Opencast" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" type="text/css" href="/engage/mm/css/engage-ui.css" />
<link rel="stylesheet" href="/ltitools/lib/font-awesome/css/font-awesome.min.css" />
<link rel="stylesheet" href="/ltitools/lib/paginationjs/dist/pagination.css" />
<link rel="stylesheet" href="/ltitools/lib/bootstrap/dist/css/bootstrap.min.css" />
<link rel="stylesheet" href="/ltitools/lib/jquery-ui-dist/jquery-ui.css" />
<!-- #DCE OPC-139 add deeplink style last to overrule other (i.e. engage) styles -->
<link rel="stylesheet" type="text/css" href="deeplink.css" />

<title>Opencast: Deep Linking</title>
</head>
<body>
  <ul class="nav nav-tabs">
    <li class="nav-item active" id="episodes-tab"><a class="nav-link" data-toggle="tab" href="#episodes" aria-controls="episodes" aria-selected="true">Episodes</a></li>
    <li class="nav-item" id="series-tab"><a class="nav-link" data-toggle="tab" href="#series" aria-controls="series" aria-selected="false">Series</a></li>
  </ul>

<div class="tab-content">
  <div id=episodes role="tabpanel" aria-labelledby="episodes-tab" class="tab-pane fade show active">
    <div id=episodes-searchfield class="searchfield"></div>
    <div id=episodes-results class="container-fluid"></div>
    <div class=clearfix></div>
    <div id=episodes-pager></div>
  </div>
  <div id=series role="tabpanel" aria-labelledby="series-tab" class="tab-pane fade">
    <div id=series-searchfield class="searchfield"></div>
    <div id=series-results class="container-fluid"></div>
    <div class=clearfix></div>
    <div id=series-pager></div>
  </div>
</div>
<form id=select method=post action=/lti/ci>
  <input type=hidden name=content_items id=content_items>
  <input type=hidden name=data id=data>
  <input type=hidden name=test id=test>
  <input type=hidden name=consumer_key id=consumer_key>
  <input type=hidden name=content_item_return_url id=content_item_return_url>
  <input id="item-form-submit" type=submit value=Select />
</form>

<!-- Template for episodes -->
<script id=template-episode type=x-tmpl-mustache>
<div class="col-xs-12 col-sm-6 col-md-4 col-lg-4 episode-tile" for={{mpID}}>
  <div class="tile">
    <div class="seriesindicator" style="background-color: {{color}};"></div>
    <div class="tilecontent">
      <h5 class="title">{{title}}</h5>
      <div>
        <img class="thumbnail img-fluid img-thumbnail" alt=Preview src={{image}} />
      </div>
      <div class="infos">
        <div class="creator">{{i18ncreator}}</div>
        <div class="seriestitle">{{seriestitle}}</div>
        <div class="date">{{created}}</div>
        <div class="duration">{{duration}}</div>
        <a href="#" class="btn btn-primary card-text selectitem" id="populateData-{{mpID}}"
          onclick="populateData('{{mpID}}')">Select</a>
        <a href="#" class="btn btn-primary card-text selectitem" id="preview-{{mpID}}"
            onclick="loadPlayerPreview('{{mpID}}', '{{durationSecs}}')">View</a>
      </div>
    </div>
  </div>
</div>
</script>

<!-- Template for series -->
<script id=template-series type=x-tmpl-mustache>
<div class="col-xs-12 col-sm-6 col-md-4 col-lg-4 float-left">
  <div class="tile">
    <div class="seriesindicator" style="background-color: {{color}};"></div>
    <div class="tilecontent">
      <h5 class="subject">{{subject}}</h5>
      <div class="infos">
        <div class="title">{{title}}</div>
        <div class="creator">{{i18ncreator}}</div>
        <div class="crn">{{serieslabel}}</div>
        <a href="#" class="btn btn-primary card-text selectitem"
          onclick="showEpisodesList('{{identifier}}')">Select</a>
      </div>
    </div>
  </div>
</div>
</script>

<!-- Template for number of results -->
<script id=template-results-episode type=x-tmpl-mustache>
  Results {{range.begin}}-{{range.end}} of {{total}}
</script>

<!-- Template for search field -->
<script id=template-episodes-filter type=x-tmpl-mustache>
  <input type=text id="selected-episodes" value="{{query}}"/>
  <input type=submit onClick="refreshEpisodesList('{{series}}')" name="search" value="Search"/>
  {{#seriestoggle}}
  <input type=checkbox onClick="toggleSeriesFilter('{{seriestoggle}}')" {{seriestoggleCheck}}
     name="toggle-series-filter" id="toggle-series-filter"  value="{{seriestoggle}}">
  {{serieslabel}}
  {{/seriestoggle}}
  {{#canReset}}
  <input type=submit onClick="resetEpisodesList('{{seriesorig}}')" name="reset" value="Reset"/>
  {{/canReset}}
</script>
<script id=template-series-filter type=x-tmpl-mustache>
  <input type=text id="selected-series" value="{{query}}"/>
  <input type=submit onClick="refreshSeriesList()" value="Search"/>
  {{#query}}
  <input type=submit onClick="resetSeriesList()" name="reset" value="Reset"/>
  {{/query}}
</script>

<!-- Template for spinner -->
<script id=template-loading type=x-tmpl-mustache>
  <div class=loading>
    <i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw"></i>
    <span class="sr-only">Loading...</span>
  </div>
</script>

<!-- Template for player and range -->
<script id=template-player-preview type=x-tmpl-mustache >
  <iframe style="height" id="player-frame" data-url="{{playerUrl}}" src="{{playerUrl}}">
  </iframe>
  <div id="player-options">
    <div id="player-option-range">
      <div id="player-slider-input" >
        <label for="player-range">Range (seconds):</label>
        <input type="text" id="player-range" readonly="readonly" />
      </div>
      <div id="player-slider-range"></div>
    </div>
  </div>
  <div id="player-action-buttons">
    <a href="#" class="btn btn-primary card-text selectitem"
      onclick="refreshData()">Cancel</a>
    <a href="#" class="btn btn-primary card-text selectitem"
      onclick="reloadPlayer('{{playerUrl}}')">Reload with Range</a>
    <a href="#" class="btn btn-primary card-text selectitem" id="populateData-{{mpID}}-range"
      onclick="populateData('{{mpID}}')">Select</a>
  </div>
  <script type="text/javascript">
  $( function() {
    $( "#player-slider-range" ).slider({
      range: true,
      min: 0,
      max: {{durationSecs}},
      values: [ 0, {{durationSecs}} ],
      slide: function( event, ui ) {
        $( "#player-range" ).val(ui.values[ 0 ] + " - " + ui.values[ 1 ]);
      }
    });
    $( "#player-range" ).val($( "#player-slider-range" ).slider( "values", 0 ) +
      " - " + $( "#player-slider-range" ).slider( "values", 1 ) );
  } );
  </script>
</script>

<script type=text/javascript src=/ltitools/lib/jquery/dist/jquery.min.js></script>
<script type=text/javascript src=/ltitools/lib/jquery-ui-dist/jquery-ui.js></script>
<script type=text/javascript src=/ltitools/lib/bootstrap/dist/js/bootstrap.min.js></script>
<script type=text/javascript src=/ltitools/lib/axios/dist/axios.min.js></script>
<script type=text/javascript src=/ltitools/lib/mustache/mustache.min.js></script>
<script type=text/javascript src=/ltitools/lib/paginationjs/dist/pagination.min.js></script>
<script type=text/javascript src=/ltitools/i18n-data.js></script>
<script type=text/javascript src=deeplink.js></script>
</body>
</html>
